# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# ğŸ” ĞŸĞ¾Ğ´Ğ´Ğ¾Ğ¼ĞµĞ½Ñ‹ Ğ¸ Ñ€ĞµĞ´Ğ¸Ñ€ĞµĞºÑ‚Ñ‹
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
RewriteEngine On

# ğŸ” Ğ˜ÑĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ğµ Ğ´Ğ»Ñ AutoSSL
RewriteCond %{REQUEST_URI} ^/\.well-known/acme-challenge/
RewriteRule ^ - [L]

# ğŸŒŒ Ğ—Ğ°Ğ³Ğ»ÑƒÑˆĞºĞ° Ğ´Ğ»Ñ ÑĞ¸ÑÑ‚ĞµĞ¼Ğ½Ñ‹Ñ… Ğ¿Ğ¾Ğ´Ğ´Ğ¾Ğ¼ĞµĞ½Ğ¾Ğ²
RewriteCond %{HTTP_HOST} ^(cpanel|webmail|webdisk|cpcontacts|cpcalendars)\.darlingx\.com$ [NC]
RewriteRule ^(.*)$ /subdomain-landing.html [L]

# ğŸŒ Ğ ĞµĞ´Ğ¸Ñ€ĞµĞºÑ‚ www â†’ Ğ¾ÑĞ½Ğ¾Ğ²Ğ½Ğ¾Ğ¹ Ğ´Ğ¾Ğ¼ĞµĞ½
RewriteCond %{HTTP_HOST} ^www\.darlingx\.com$ [NC]
RewriteRule ^(.*)$ https://darlingx.com/$1 [L,R=301]

# ğŸ”’ Ğ ĞµĞ´Ğ¸Ñ€ĞµĞºÑ‚ HTTP â†’ HTTPS
RewriteCond %{HTTPS} !=on
RewriteRule ^ https://%{HTTP_HOST}%{REQUEST_URI} [L,R=301]

# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# ğŸ“¦ Ğ§Ğ¸ÑÑ‚Ñ‹Ğµ Ğ¼Ğ°Ñ€ÑˆÑ€ÑƒÑ‚Ñ‹ Ğ¸ ÑÑ‚Ñ€Ğ°Ğ½Ğ¸Ñ†Ñ‹
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

# Ğ¯Ğ²Ğ½Ğ¾Ğµ Ñ€Ğ°Ğ·Ñ€ĞµÑˆĞµĞ½Ğ¸Ğµ .html Ñ„Ğ°Ğ¹Ğ»Ğ¾Ğ², ĞµÑĞ»Ğ¸ Ğ¾Ğ½Ğ¸ ÑÑƒÑ‰ĞµÑÑ‚Ğ²ÑƒÑÑ‚
RewriteCond %{REQUEST_URI} \.html$ [NC]
RewriteCond %{REQUEST_FILENAME} -f
RewriteRule ^ - [L]

# Clean URL â†’ HTML (Ñ‡Ğ¸Ñ‚Ğ°ĞµĞ¼Ñ‹Ğµ Ğ¼Ğ°Ñ€ÑˆÑ€ÑƒÑ‚Ñ‹)
RewriteRule ^books/?$ books.html [L]
RewriteRule ^book-details/?$ book-details.html [L]
RewriteRule ^posts/?$ posts.html [L]
RewriteRule ^projects/?$ projects.html [L]
RewriteRule ^lists/?$ lists.html [L]
RewriteRule ^cv/?$ cv.html [L]
RewriteRule ^open-questions/?$ open-questions.html [L]
RewriteRule ^quotes/?$ quotes.html [L]
RewriteRule ^project-detail/?$ project-detail.html [L]
RewriteRule ^my-time/?$ my-time.html [L]
RewriteRule ^offline/?$ offline.html [L]
RewriteRule ^register/?$ register.html [L]

# ğŸ” ĞŸĞ¾Ğ´Ğ´ĞµÑ€Ğ¶ĞºĞ° /admin/ Ğ±ĞµĞ· Ğ¿ĞµÑ€ĞµÑ…Ğ²Ğ°Ñ‚Ğ°
RewriteCond %{REQUEST_URI} ^/admin/
RewriteRule ^ - [L]

# ğŸ”§ ĞŸĞ¾Ğ´Ğ´ĞµÑ€Ğ¶ĞºĞ° /api/ Ğ±ĞµĞ· Ğ¿ĞµÑ€ĞµÑ…Ğ²Ğ°Ñ‚Ğ°
RewriteCond %{REQUEST_URI} ^/api/
RewriteRule ^ - [L]

# ğŸŒ SPA fallback â€” ĞµÑĞ»Ğ¸ ĞĞ• Ñ„Ğ°Ğ¹Ğ» Ğ¸ ĞĞ• Ğ´Ğ¸Ñ€ĞµĞºÑ‚Ğ¾Ñ€Ğ¸Ñ
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^ index.html [QSA,L]

# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# ğŸ“ ĞŸĞ¾Ğ´Ğ´ĞµÑ€Ğ¶ĞºĞ° query Ğ¿Ğ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€Ğ¾Ğ² (?id=...)
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
RewriteCond %{QUERY_STRING} ^id=([^&]+)$
RewriteRule ^book-details\.html$ book-details.html [L]

# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# ğŸ“¦ MIME-Ñ‚Ğ¸Ğ¿Ñ‹
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
AddType text/css .css
AddType application/javascript .js
AddType image/webp .webp
AddType image/svg+xml .svg
AddType font/ttf .ttf
AddType font/eot .eot
AddType font/woff .woff
AddType font/woff2 .woff2

# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# ğŸ›¡ Ğ—Ğ°Ğ³Ğ¾Ğ»Ğ¾Ğ²ĞºĞ¸ Ğ±ĞµĞ·Ğ¾Ğ¿Ğ°ÑĞ½Ğ¾ÑÑ‚Ğ¸
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
<IfModule mod_headers.c>
    Header set X-XSS-Protection "1; mode=block"
    Header always set X-Content-Type-Options "nosniff"
    Header set X-Frame-Options "SAMEORIGIN"
</IfModule>

# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# ğŸ—‚ ĞšÑÑˆĞ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
<IfModule mod_expires.c>
    ExpiresActive On
    ExpiresByType image/webp "access plus 1 year"
    ExpiresByType image/jpg "access plus 1 year"
    ExpiresByType image/jpeg "access plus 1 year"
    ExpiresByType image/gif "access plus 1 year"
    ExpiresByType image/png "access plus 1 year"
    ExpiresByType image/svg+xml "access plus 1 month"
    ExpiresByType text/css "access plus 1 month"
    ExpiresByType text/javascript "access plus 1 month"
    ExpiresByType application/javascript "access plus 1 month"
</IfModule>

# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# ğŸš« Ğ—Ğ°Ğ¿Ñ€ĞµÑ‚ Ğ»Ğ¸ÑÑ‚Ğ¸Ğ½Ğ³Ğ° Ğ´Ğ¸Ñ€ĞµĞºÑ‚Ğ¾Ñ€Ğ¸Ğ¹
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Options -Indexes

# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# ğŸ’¥ ĞšĞ°ÑÑ‚Ğ¾Ğ¼Ğ½Ğ°Ñ ÑÑ‚Ñ€Ğ°Ğ½Ğ¸Ñ†Ğ° 404
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ErrorDocument 404 /404.html

# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# âš¡ Ğ¡Ğ¶Ğ°Ñ‚Ğ¸Ğµ (gzip)
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
<IfModule mod_deflate.c>
    <IfModule mod_filter.c>
        AddOutputFilterByType DEFLATE text/html text/plain text/xml text/css text/javascript application/javascript application/x-javascript application/json application/xml image/svg+xml
    </IfModule>
</IfModule>

# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# ğŸ”“ Ğ Ğ°Ğ·Ñ€ĞµÑˆĞµĞ½Ğ¸Ğµ Ğ´Ğ¾ÑÑ‚ÑƒĞ¿Ğ° ĞºĞ¾ Ğ²ÑĞµĞ¼ Ñ„Ğ°Ğ¹Ğ»Ğ°Ğ¼
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
<FilesMatch ".*">
    Order Allow,Deny
    Allow from all
</FilesMatch>
